%% Current architecture diagram (active runtime)
%% Updated: February 14, 2026

flowchart LR
  A["EML Upload (.eml)"] --> B["Normalization Envelope"]
  B --> C["Signal Engine<br/>(Deterministic + Semantic)"]
  C --> D["Scoring Engine<br/>(Risk + Confidence + Gate)"]
  D --> E{"Need Enrichment?"}
  E -- "No" --> H["Final Report + Verdict"]
  E -- "Yes" --> F["Deterministic Enrichment Plan<br/>(unknown non-deterministic signals)"]
  F --> G["Bounded Enrichment Loop<br/>(MCP tools + evidence mapping)"]
  G --> D
  H --> I["Artifacts + Audit Chain"]

  subgraph WEBUI["Local Web UI (Docker)"]
    J["FastAPI API + SSE"]
    K["React JSX Frontend"]
  end

  H --> J
  J --> K
